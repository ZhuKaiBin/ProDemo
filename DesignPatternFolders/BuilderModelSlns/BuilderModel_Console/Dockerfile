# è¯·å‚é˜?https://aka.ms/customizecontainer ä»¥äº†è§£å¦‚ä½•è‡ªå®šä¹‰è°ƒè¯•å®¹å™¨ï¼Œä»¥å?Visual Studio å¦‚ä½•ä½¿ç”¨æ­?Dockerfile ç”Ÿæˆæ˜ åƒä»¥æ›´å¿«åœ°è¿›è¡Œè°ƒè¯•ã€?

# æ­¤é˜¶æ®µç”¨äºåœ¨å¿«é€Ÿæ¨¡å¼?é»˜è®¤ä¸ºè°ƒè¯•é…ç½?ä¸‹ä» VS è¿è¡Œæ—?
FROM mcr.microsoft.com/dotnet/runtime:8.0 AS base
USER $APP_UID
WORKDIR /app


# æ­¤é˜¶æ®µç”¨äºç”ŸæˆæœåŠ¡é¡¹ç›?
FROM mcr.microsoft.com/dotnet/sdk:8.0 AS build
ARG BUILD_CONFIGURATION=Release
WORKDIR /src
COPY ["DesignPatternFolders/BuilderModelSlns/BuilderModel_Console/BuilderModel_Console.csproj", "DesignPatternFolders/BuilderModelSlns/BuilderModel_Console/"]
RUN dotnet restore "./DesignPatternFolders/BuilderModelSlns/BuilderModel_Console/BuilderModel_Console.csproj"
COPY . .
WORKDIR "/src/DesignPatternFolders/BuilderModelSlns/BuilderModel_Console"
RUN dotnet build "./BuilderModel_Console.csproj" -c $BUILD_CONFIGURATION -o /app/build

# æ­¤é˜¶æ®µç”¨äºå‘å¸ƒè¦å¤åˆ¶åˆ°æœ€ç»ˆé˜¶æ®µçš„æœåŠ¡é¡¹ç›®
FROM build AS publish
ARG BUILD_CONFIGURATION=Release
RUN dotnet publish "./BuilderModel_Console.csproj" -c $BUILD_CONFIGURATION -o /app/publish /p:UseAppHost=false

# æ­¤é˜¶æ®µåœ¨ç”Ÿäº§ä¸­ä½¿ç”¨ï¼Œæˆ–åœ¨å¸¸è§„æ¨¡å¼ä¸‹ä» VS è¿è¡Œæ—¶ä½¿ç”?åœ¨ä¸ä½¿ç”¨è°ƒè¯•é…ç½®æ—¶ä¸ºé»˜è®¤å€?
FROM base AS final
WORKDIR /app
COPY --from=publish /app/publish .
ENTRYPOINT ["dotnet", "BuilderModel_Console.dll"]